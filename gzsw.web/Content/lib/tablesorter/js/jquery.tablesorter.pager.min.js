/*! tablesorter pager plugin minified - updated 5/28/2012 */
(function(a){a.extend({tablesorterPager:new function(){this.defaults={container:null,ajaxUrl:null,ajaxProcessing:function(w){return[0,[],null]},output:"{startRow} to {endRow} of {totalRows} rows",updateArrows:true,page:0,size:10,fixedHeight:false,removeRows:true,cssNext:".next",cssPrev:".prev",cssFirst:".first",cssLast:".last",cssPageDisplay:".pagedisplay",cssPageSize:".pagesize",cssDisabled:"disabled",totalRows:0,totalPages:0};var m=this,t=function(B,y){var w="addClass",z="removeClass",A=B.cssDisabled,x=!!y;if(B.updateArrows){B.container[(B.totalRows<B.size)?w:z](A);a(B.cssFirst+","+B.cssPrev,B.container)[(x||B.page===0)?w:z](A);a(B.cssNext+","+B.cssLast,B.container)[(x||B.page===B.totalPages-1)?w:z](A)}},q=function(y,z){if(z.totalPages>0){z.startRow=z.size*(z.page)+1;z.endRow=Math.min(z.totalRows,z.size*(z.page+1));var w=a(z.cssPageDisplay,z.container),x=z.output.replace(/\{(page|totalPages|startRow|endRow|totalRows)\}/gi,function(A){return{"{page}":z.page+1,"{totalPages}":z.totalPages,"{startRow}":z.startRow,"{endRow}":z.endRow,"{totalRows}":z.totalRows}[A]});if(w[0]){w[(w[0].tagName==="INPUT")?"val":"html"](x)}}t(z);a(y).trigger("pagerComplete",z)},s=function(y,A){var z,w,x=a(y.tBodies[0]);if(A.fixedHeight){x.find("tr.pagerSavedHeightSpacer").remove();w=a.data(y,"pagerSavedHeight");if(w){z=w-x.height();if(z>5&&a.data(y,"pagerLastSize")===A.size&&x.find("tr:visible").length<A.size){x.append('<tr class="pagerSavedHeightSpacer remove-me" style="height:'+z+'px;"></tr>')}}}},g=function(x,y){var w=a(x.tBodies[0]);w.find("tr.pagerSavedHeightSpacer").remove();a.data(x,"pagerSavedHeight",w.height());s(x,y);a.data(x,"pagerLastSize",y.size)},n=function(z,C){var x,A=a("tr:not(."+z.config.cssChildRow+")",z.tBodies),w=A.length,y=(C.page*C.size),B=(y+C.size);if(B>w){B=w}for(x=0;x<w;x++){A[x].style.display=(x>=y&&x<B)?"":"none"}},r=function(w,x){x.size=parseInt(a(x.cssPageSize,x.container).val(),10)||x.size;a.data(w,"pagerLastSize",x.size);t(x);if(!x.removeRows){n(w,x);a(w).bind("sortEnd.pager",function(){n(w,x)})}},i=function(O,K,N,B){if(typeof(N.ajaxProcessing)==="function"){var H,G,F,D,w,L,J=a(K),y=a(K.tBodies).filter(":not(."+K.config.cssInfoBlock+")"),x=J.find("thead th").length,I="",z='<tr class="remove-me"><td style="text-align: center;" colspan="'+x+'">'+(B?B.message+" ("+B.name+")":"No rows found")+"</td></tr>",C=N.ajaxProcessing(O)||[0,[]],M=C[1]||[],E=M.length,A=C[2];if(E>0){for(H=0;H<E;H++){I+="<tr>";for(G=0;G<M[H].length;G++){I+="<td>"+M[H][G]+"</td>"}I+="</tr>"}}if(A&&A.length===x){D=J.hasClass("hasStickyHeaders");L=J.find("."+((N.widgetOptions&&N.widgetOptions.stickyHeaders)||"tablesorter-stickyheader"));w=J.find("tfoot tr:first").children();J.find("thead tr.tablesorter-header th").each(function(Q){var R=a(this),P=(R.find("span").length)?R.find("span:first"):R;P.html(A[Q]);w.eq(Q).html(A[Q]);if(D&&L.length){P=L.find("th").eq(Q);P=(P.find("span").length)?P.find("span:first"):P;P.html(A[Q])}})}if(B){J.find("thead").append(z)}else{y.html(I)}N.temp.remove();J.trigger("update");N.totalRows=C[0]||0;N.totalPages=Math.ceil(N.totalRows/N.size);q(K,N);s(K,N);J.trigger("pagerChange",N)}},e=function(x,z){var y=a(x),w=z.ajaxUrl.replace(/\{page\}/g,z.page).replace(/\{size\}/g,z.size);if(w!==""){z.temp=a("<div/>",{id:"tablesorterPagerLoading",width:y.outerWidth(true),height:y.outerHeight(true)});y.before(z.temp);a(document).ajaxError(function(C,D,B,A){i(null,x,z,A)});a.getJSON(w,function(A){i(A,x,z)})}},o=function(D,F,C){var z,y,w,A=document.createDocumentFragment(),x=F.length,E=(C.page*C.size),B=(E+C.size);if(x<1){return}a(D).trigger("pagerChange",C);if(!C.removeRows){n(D,C)}else{if(B>F.length){B=F.length}a(D.tBodies[0]).addClass("tablesorter-hidden");a.tablesorter.clearTableBody(D);for(z=E;z<B;z++){w=F[z];x=w.length;for(y=0;y<x;y++){A.appendChild(w[y])}}D.tBodies[0].appendChild(A);a(D.tBodies[0]).removeClass("tablesorter-hidden")}if(C.page>=C.totalPages){j(D,C)}q(D,C);if(!C.isDisabled){s(D,C)}a(D).trigger("applyWidgets")},k=function(w,x){if(x.ajax){t(x,true)}else{x.isDisabled=true;a.data(w,"pagerLastPage",x.page);a.data(w,"pagerLastSize",x.size);x.page=0;x.size=x.totalRows;x.totalPages=1;a("tr.pagerSavedHeightSpacer",w.tBodies[0]).remove();o(w,w.config.rowsCopy,x)}a(x.cssPageSize,x.container).addClass(x.cssDisabled)[0].disabled=true},c=function(w,x){if(x.isDisabled){return}if(x.page<0||x.page>(x.totalPages-1)){x.page=0}a.data(w,"pagerLastPage",x.page);if(x.ajax){e(w,x)}else{o(w,w.config.rowsCopy,x)}v(x.page)},d=function(x,w,y){y.size=w;a.data(x,"pagerLastPage",y.page);a.data(x,"pagerLastSize",y.size);y.totalPages=Math.ceil(y.totalRows/y.size);c(x,y)},f=function(w,x){x.page=0;c(w,x)},j=function(w,x){x.page=(x.totalPages-1);c(w,x)},p=function(w,x){x.page++;if(x.page>=(x.totalPages-1)){x.page=(x.totalPages-1)}c(w,x)},b=function(w,x){x.page--;if(x.page<=0){x.page=0}c(w,x)},v=function(w){window.location.hash=w+1},l=function(){var w=0;if(window.location.hash){w=(window.location.hash.replace(/#/,"")-1)}return w},u=function(w,x){k(w,x);x.container.hide();w.config.appender=null;a(w).unbind("destroy.pager sortEnd.pager enable.pager disable.pager")},h=function(x,z,w){var y=a(z.cssPageSize,z.container).removeClass(z.cssDisabled).removeAttr("disabled");z.isDisabled=false;z.page=a.data(x,"pagerLastPage")||z.page||0;z.size=a.data(x,"pagerLastSize")||parseInt(y.val(),10)||z.size;z.totalPages=Math.ceil(z.totalRows/z.size);if(w){a(x).trigger("update");d(x,z.size,z);r(x,z);s(x,z)}};m.appender=function(w,x){var y=w.config.pager;if(!y.ajax){w.config.rowsCopy=x;y.totalRows=x.length;y.size=a.data(w,"pagerLastSize")||y.size;y.totalPages=Math.ceil(y.totalRows/y.size);o(w,x,y)}};m.construct=function(w){return this.each(function(){var y=this.config,B=y.pager=a.extend({},a.tablesorterPager.defaults,w),z=this,A=a(z),x=a(B.container).show();y.appender=m.appender;h(z,B,false);if(typeof(B.ajaxUrl)==="string"){B.ajax=true;e(z,B)}else{B.ajax=false;a(this).trigger("appendCache",true);r(z,B)}a(B.cssFirst,x).unbind("click.pager").bind("click.pager",function(){if(!a(this).hasClass(B.cssDisabled)){f(z,B)}return false});a(B.cssNext,x).unbind("click.pager").bind("click.pager",function(){if(!a(this).hasClass(B.cssDisabled)){p(z,B)}return false});a(B.cssPrev,x).unbind("click.pager").bind("click.pager",function(){if(!a(this).hasClass(B.cssDisabled)){b(z,B)}return false});a(B.cssLast,x).unbind("click.pager").bind("click.pager",function(){if(!a(this).hasClass(B.cssDisabled)){j(z,B)}return false});a(B.cssPageSize,x).unbind("change.pager").bind("change.pager",function(){a(B.cssPageSize,x).val(a(this).val());if(!a(this).hasClass(B.cssDisabled)){d(z,parseInt(a(this).val(),10),B);g(z,B)}return false});window.addEventListener("popstate",function(C){B.page=l();c(z,B)});A.unbind("disable.pager enable.pager destroy.pager").bind("disable.pager",function(){k(z,B)}).bind("enable.pager",function(){h(z,B,true)}).bind("destroy.pager",function(){u(z,B)})})}}});a.fn.extend({tablesorterPager:a.tablesorterPager.construct})})(jQuery);
